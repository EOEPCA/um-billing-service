<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<meta name="description" content="Billing Service Interface Control Document for the Common Architecture">
<meta name="keywords" content="common architecture design">
<meta name="author" content="TVUK System Team">
<title>Billing Service Interface Control Document: EOEPCA.ICD.xxx</title>
<link rel="stylesheet" href="stylesheets/eoepca.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Billing Service Interface Control Document: EOEPCA.ICD.xxx</h1>
<div class="details">
<span id="author" class="author">TVUK System Team</span><br>
<span id="email" class="email">&lt;<a href="mailto:Eoepca.SystemTeam@telespazio.com">Eoepca.SystemTeam@telespazio.com</a>&gt;</span><br>
<span id="revnumber">version 1.0,</span>
<span id="revdate">30/11/2020</span>
<br><span id="revremark"></span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Billing Service Interface Control Document</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_purpose_and_scope">1.1. Purpose and Scope</a></li>
</ul>
</li>
<li><a href="#mainOverview">2. Overview</a></li>
<li><a href="#_billing_service_interfaces">3. Billing Service Interfaces</a>
<ul class="sectlevel2">
<li><a href="#_endpoints">3.1. Endpoints</a>
<ul class="sectlevel3">
<li><a href="#_billing_checks">3.1.1. Billing Checks</a>
<ul class="sectlevel4">
<li><a href="#_policy_validation">3.1.1.1. Policy Validation</a>
<ul class="sectlevel5">
<li><a href="#_description">3.1.1.1.1. Description</a></li>
<li><a href="#_parameters">3.1.1.1.2. Parameters</a></li>
<li><a href="#_return_type">3.1.1.1.3. Return Type</a></li>
<li><a href="#_responses">3.1.1.1.4. Responses</a></li>
<li><a href="#_samples">3.1.1.1.5. Samples</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_billing_report">3.1.2. Billing Report</a>
<ul class="sectlevel4">
<li><a href="#_billing_post">3.1.2.1. Billing POST</a>
<ul class="sectlevel5">
<li><a href="#_description_2">3.1.2.1.1. Description</a></li>
<li><a href="#_parameters_2">3.1.2.1.2. Parameters</a></li>
<li><a href="#_return_type_2">3.1.2.1.3. Return Type</a></li>
<li><a href="#_content_type">3.1.2.1.4. Content Type</a></li>
<li><a href="#_responses_2">3.1.2.1.5. Responses</a></li>
<li><a href="#_samples_2">3.1.2.1.6. Samples</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#models">3.2. Models</a>
<ul class="sectlevel3">
<li><a href="#BillingEvent">3.2.1. Billing Event</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>EO Exploitation Platform Common Architecture<br>
<em>Billing Service Interface Control Document</em><br>
EOEPCA.ICD.xxx</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>COMMENTS and ISSUES</strong><br>
If you would like to raise comments or issues on this document, please do so by raising an Issue at the following URL <a href="https://github.com/EOEPCA/um-billing-service/issues" class="bare">https://github.com/EOEPCA/um-billing-service/issues</a>.</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>PDF</strong><br>
This document is available in PDF format <a href="EOEPCA-um-billing-service.pdf" target="_blank" rel="noopener">here</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>EUROPEAN SPACE AGENCY CONTRACT REPORT</strong><br>
The work described in this report was done under ESA contract. Responsibility for the contents resides in the author or organisation that prepared it.</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>TELESPAZIO VEGA UK Ltd</strong><br>
350 Capability Green, Luton, Bedfordshire, LU1 3LU, United Kingdom.<br>
Tel: +44 (0)1582 399000<br>
<a href="http://telespazio-vega.com/">www.telespazio-vega.com</a></p></td>
</tr>
</tbody>
</table>
<hr>
<div class="dlist">
<dl>
<dt class="hdlist1">AMENDMENT HISTORY</dt>
<dd>
<p>This document shall be amended by releasing a new edition of the document in its entirety.<br>
The Amendment Record Sheet below records the history and issue status of this document.</p>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Amendment Record Sheet</caption>
<colgroup>
<col style="width: 12.5%;">
<col style="width: 25%;">
<col style="width: 62.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">ISSUE</th>
<th class="tableblock halign-center valign-top">DATE</th>
<th class="tableblock halign-left valign-top">REASON</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">0.1</p></th>
<td class="tableblock halign-center valign-top"><p class="tableblock">dd/mm/yyyy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial in-progress draft</p></td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<hr>
<div style="page-break-after: always;"></div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_and_scope">1.1. Purpose and Scope</h3>
<div class="paragraph">
<p>This document presents the Billing Service Interfaces for the Common Architecture. It servers as a complementary document to its corresponding Software Design Document.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mainOverview">2. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This Interface Control Document (ICD) is a companion to the System Design Document for the Billing Service. The ICD provides a Building Block level specification of the interfaces exposed by the BIS to the rest of EOEPCA components.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Section <a href="#Interfaces">[Interfaces]</a></dt>
<dd>
<p>Provides the interface specification of the Building Block.</p>
</dd>
</dl>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_billing_service_interfaces">3. Billing Service Interfaces</h2>
<div class="sectionbody">
<div class="quoteblock abstract">
<div class="title">Abstract</div>
<blockquote>
This OpenAPI Document describes the endpoints exposed by Billing Service Building Block deployments.  &lt;br&gt; &lt;br&gt; Using this API will allow to validate billing events and generate billing reports.
</blockquote>
</div>
<div class="sect2">
<h3 id="_endpoints">3.1. Endpoints</h3>
<div class="sect3 BillingChecks">
<h4 id="_billing_checks">3.1.1. Billing Checks</h4>
<div class="sect4 billingCheckPost">
<h5 id="_policy_validation">3.1.1.1. Policy Validation</h5>
<div class="paragraph">
<p><code>POST /billing/validate</code></p>
</div>
<div class="paragraph">
<p>Billing Event check</p>
</div>
<div class="sect5">
<h6 id="_description">3.1.1.1.1. Description</h6>
<div class="paragraph">
<p>This operation validates a received billing event, by contacting the Pricing Engine for specific checks.</p>
</div>
</div>
<div class="sect5">
<h6 id="_parameters">3.1.1.1.2. Parameters</h6>
<div class="paragraph">
<p>&lt;TBD&gt;</p>
</div>
</div>
<div class="sect5">
<h6 id="_return_type">3.1.1.1.3. Return Type</h6>
<div class="paragraph">
<p>&lt;TBD&gt;</p>
</div>
</div>
<div class="sect5">
<h6 id="_responses">3.1.1.1.4. Responses</h6>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. http response codes</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 50%;">
<col style="width: 16.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Message</th>
<th class="tableblock halign-left valign-top">Datatype</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;TBD&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;TBD&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;TBD&gt;</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="_samples">3.1.1.1.5. Samples</h6>

</div>
</div>
</div>
<div class="sect3 BillingReport">
<h4 id="_billing_report">3.1.2. Billing Report</h4>
<div class="sect4 billingPost">
<h5 id="_billing_post">3.1.2.1. Billing POST</h5>
<div class="paragraph">
<p><code>POST /billing/report</code></p>
</div>
<div class="paragraph">
<p>Generates a billing report based on passed billing identity</p>
</div>
<div class="sect5">
<h6 id="_description_2">3.1.2.1.1. Description</h6>
<div class="paragraph">
<p>This operation takes a passed billing identity value, validates it against the user identity passed in the authentication token, using the OIDC connection to the Login Service, and generates a report of billing events matching the identity.</p>
</div>
</div>
<div class="sect5">
<h6 id="_parameters_2">3.1.2.1.2. Parameters</h6>
<div class="sect6">
<h7 id="_header_parameters">Header Parameters</h7>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 50%;">
<col style="width: 16.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authorization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JWT or Bearer Token</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect6">
<h7 id="_data_parameters">Data Parameters</h7>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 50%;">
<col style="width: 16.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">billing_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Billing identity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect5">
<h6 id="_return_type_2">3.1.2.1.3. Return Type</h6>
<div class="paragraph">
<p>array[<a href="#billing events">[billing events]</a>]</p>
</div>
</div>
<div class="sect5">
<h6 id="_content_type">3.1.2.1.4. Content Type</h6>
<div class="ulist">
<ul>
<li>
<p>application/json</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_responses_2">3.1.2.1.5. Responses</h6>
<div class="paragraph">
<p>&lt;TBD&gt;</p>
</div>
</div>
<div class="sect5">
<h6 id="_samples_2">3.1.2.1.6. Samples</h6>

</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="models">3.2. Models</h3>
<div class="sect3">
<h4 id="BillingEvent">3.2.1. Billing Event</h4>
<table class="tableblock frame-all grid-all stretch fields-NewPolicy">
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">billing_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Billing Identity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;TBD&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">resource_list</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array of resource_ids to validate access</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;TBD&gt;</p></td>
</tr>
</tbody>
</table>
<hr>
<div class="paragraph large">
<p>&lt;&lt; End of Document &gt;&gt;</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.0<br>
Last updated 2021-01-25 18:51:40 UTC
</div>
</div>
</body>
</html>